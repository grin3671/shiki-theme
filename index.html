<!DOCTYPE html>
<html lang="ru" data-env="dev" style="background: #FAFAFA; color: #212121; font-size: 16px;">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="8xlW8M1Ln8KMWkopmPWTEuJqaaqpDixWDmJJ9vPgBG8">
    <meta name="theme-color" content="#009688">
    <title>Сборщик shiki-theme</title>
    <meta name="description" content="Сборщик CSS темы для Шикимори.">
    <link rel="stylesheet" href="./src/css/common.css?14">
    <style></style>
  </head>
  <body>
    <div id="page" class="page">
      <header class="topbar">
        <input type="checkbox" id="topbar_menu">
        <div class="menubar">
          <label for="topbar_menu" class="md-icon" data-icon="menu">
          </label><h1 class="topbar-title">Сборщик</h1>
        </div>
        <label for="copy_css" class="md-fab" :class="{ hidden: status.isFileLoading }">
          <span class="md-icon" data-icon="content_copy"></span>
        </label>
        <label for="topbar_menu" class="shade"></label>
        <nav>
          <a href="#nav_settings">Настройка темы</a>
          <a href="#nav_preview">Предпросмотр</a>
          <a href="#nav_code">Готовый стиль</a>
          <hr class="md-divider">
          <a href="https://github.com/grin3671/shiki-theme/blob/gh-pages/FAQ.md" class="nav_link--external md-icon" data-icon="open_in_new">FAQ</a>
          <a href="https://github.com/grin3671/shiki-theme" class="nav_link--external md-icon" data-icon="open_in_new">Код на GitHub</a>
        </nav>
      </header>



      <section id="nav_settings">
        <div class="content">
          <h2 class="display1">Настройка темы</h2>
          <p>Настройте тему по вкусу, а затем нажмите зафиксированную круглую кнопку, чтобы скопировать код темы. Посмотреть готовый код можно внизу страницы.</p>
          <form action="/" @submit.prevent="createTheme" class="md-container">
            <div class="md-list md-panel">
              <span class="md-list_title inactive" id="label_user_cover">
                <span class="md-icon" aria-hidden="true" data-icon="flip"></span>Вид профиля
              </span>
              <span class="md-list_content md-control_group" role="radiogroup" aria-labelledby="label_user_cover">
                <label class="md-control">
                  <input type="radio" name="type" value="cover"
                        v-model="user.selected_layout"
                        @input="setLayout($event.target.value)">
                  <span class="md-radio"></span>
                  <span>С обложкой</span>
                </label>
                <label class="md-control">
                  <input type="radio" name="type" value="simple"
                        v-model="user.selected_layout"
                        @input="setLayout($event.target.value)">
                  <span class="md-radio"></span>
                  <span>Без обложки</span>
                </label>
              </span>
            </div>


            <div class="md-list md-panel" v-if="user.selected_layout == 'cover'">
              <label for="user_id" class="md-list_title inactive required">
                <span class="md-icon" aria-hidden="true" data-icon="person"></span>Ваш ID <a href="https://github.com/grin3671/shiki-theme/blob/gh-pages/FAQ.md#как-узнать-мой-id" title="Как узнать мой ID?" class="question">?</a>
              </label>
              <div class="md-list_content">
                <div class="md-input fullwidth">
                  <input type="text" id="user_id" name="id" @change="setId" v-model="user.user_id" aria-describedby="hint_cover_url" placeholder="8764532">
                  <div class="md-divider"></div>
                  <span class="md-input_hint" id="hint_cover_url">Вставьте URL вашей аватарки на сайте <a href="https://shikimori.one">shikimori.one</a></span>
                </div>
              </div>
            </div>


            <div class="md-list md-panel" v-if="user.selected_layout == 'cover'">
              <label for="user_cover" class="md-list_title inactive" :class="{ error: errors.user_cover }">
                <span class="md-icon" aria-hidden="true" data-icon="image"></span>Обложка профиля
              </label>
              <div class="md-list_content">
                <div class="md-input fullwidth" :class="{ error: errors.user_cover }">
                  <input type="text" id="user_cover" name="cover" @change="checkImage" v-model="user.user_cover" placeholder="https://image.ibb.co/gT5kZJ/bd8W6VB.jpg">
                  <div class="md-divider"></div>
                  <span class="md-input_error">Вставьте прямую ссылку на изображение, заканчивающуюся на .jpg или .png</span>
                  <span class="md-input_hint">Используйте хостинги картинок для получения прямых ссылок</span>
                </div>
              </div>
            </div>


            <div class="md-list md-panel">
              <label for="user_background" class="md-list_title inactive" :class="{ error: errors.user_background }">
                <span class="md-icon" aria-hidden="true" data-icon="wallpaper"></span>Фон сайта
              </label>
              <div class="md-list_content">
                <div class="md-input fullwidth" :class="{ error: errors.user_background }">
                  <input type="text" id="user_background" name="background" @change="checkImage" v-model="user.user_background" placeholder="https://image.ibb.co/gT5kZJ/bd8W6VB.jpg">
                  <div class="md-divider"></div>
                  <span class="md-input_error">Вставьте прямую ссылку на изображение, заканчивающуюся на .jpg или .png</span>
                  <span class="md-input_hint">Используйте хостинги картинок для получения прямых ссылок</span>
                </div>
              </div>
            </div>


            <input type="checkbox" id="color_settings" class="field-checkbox" name="extra">
            <div class="md-list md-panel">
              <label for="color_settings" class="md-list_title inactive">
                <span class="md-icon" aria-hidden="true" data-icon="palette"></span>Цветовая палитра
              </label>
              <label for="color_settings" class="md-list_control md-icon" data-icon="expand_more"></label>
              <span class="md-list_content">
                <span class="md-list_content-placeholder">Текущая палитра: {{ currentPalette.id }}</span>
              </span>
            </div>
            <div class="md-list_hidden color-settings" v-if="!status.isFileLoading">
              <p class="text-hint">Чтобы создать свою тему, достаточно настроить основной и акцентирующий цвет, а также выбрать цвет фона — все остальные цвета изменятся автоматически!</p>

              <div class="md-container">
                <label class="v-file md-list md-control">
                  <input type="checkbox" v-model="status.isLivePreview" @change="previewTheme">
                  <span class="md-checkbox"></span><span>Интерактивный предпросмотр</span>
                  <span class="md-list_description">Использовать цветовую палитру в сборщике.</span>
                </label>
              </div>

              <h2>Готовые палитры</h2>

              <div class="flex">
                <palette-select v-model="currentPalette.id"
                                :options="builderData.palettes"
                                v-if="!status.isFileLoading"
                                @input="selectPalette($event)"
                ></palette-select>

                <button type="button"
                        class="md-button_icon tooltiped tooltiped-left"
                        aria-label="Скачать палитру"
                        @click.stop="downloadTheme">
                  <span class="md-icon" data-icon="save_alt"></span>
                </button>
              </div>


              <h2>Основные цвета</h2>

              <div class="content-flex">
                <div class="palette_preview">
                  <color-preview
                    v-model="color_primary"
                    palette="color_primary"
                    :background="color_background"
                    :text="color_text_on_primary"
                  ></color-preview>
                  <color-preview
                    v-model="color_text_on_primary"
                    palette="color_text_on_primary"
                    :background="color_primary"
                  ></color-preview>
                </div>

                <div class="palette_preview">
                  <color-preview
                    v-model="color_accent"
                    palette="color_accent"
                    :background="color_background"
                    :text="color_text_on_accent"
                  ></color-preview>
                  <color-preview
                    v-model="color_text_on_accent"
                    palette="color_text_on_accent"
                    :background="color_accent"
                  ></color-preview>
                </div>
              </div>

              <div class="content-flex">
                <div class="palette_preview small">
                  <color-preview
                    v-model="color_link"
                    palette="color_link"
                    :background="color_background"
                    text="auto"
                  ></color-preview>
                </div>

                <div class="palette_preview small">
                  <color-preview
                    v-model="color_link_hover"
                    palette="color_link_hover"
                    :background="color_background"
                    text="auto"
                  ></color-preview>
                </div>

                <div class="palette_preview small">
                  <color-preview
                    v-model="color_link_active"
                    palette="color_link_active"
                    :background="color_background"
                    text="auto"
                  ></color-preview>
                </div>
              </div>

              <h2>Фоновые цвета</h2>

              <div class="content-flex">
                <div class="palette_preview">
                  <color-preview
                    v-model="color_background"
                    palette="color_background"
                    :text="color_text_primary"
                  >
                    <button type="button"
                            class="md-button_icon tooltiped tooltiped-right"
                            aria-label="Инвертировать цвет"
                            @click.stop="setColor('color_background', 'invert')">
                      <span class="md-icon" data-icon="invert_colors"></span>
                    </button>
                  </color-preview>
                  <color-preview
                    v-model="color_text_primary"
                    palette="color_text_primary"
                    :background="color_background"
                  ></color-preview>
                </div>

                <div class="palette_preview">
                  <color-preview
                    v-model="color_surface"
                    palette="color_surface"
                    :text="color_text_primary"
                  ></color-preview>
                  <color-preview
                    v-model="color_text_primary"
                    palette="color_text_primary"
                    :background="color_surface"
                  ></color-preview>
                </div>

                <div class="palette_preview">
                  <color-preview
                    v-model="color_background_dialog"
                    palette="color_background_dialog"
                    :text="color_text_primary"
                  ></color-preview>
                  <color-preview
                    v-model="color_text_primary"
                    palette="color_text_primary"
                    :background="color_background_dialog"
                  ></color-preview>
                </div>

                <div class="palette_preview">
                  <color-preview
                    v-model="color_menu_background"
                    palette="color_menu_background"
                    :text="color_menu_text_primary"
                  ></color-preview>
                  <color-preview
                    v-model="color_menu_text_primary"
                    palette="color_menu_text_primary"
                    :background="color_menu_background"
                  ></color-preview>
                </div>
              </div>

              <h2>Автоподбор цветов</h2>

              <div class="md-container">
                <template v-for="(helper, index) in builderData.helpers">
                  <label class="v-file md-list md-control" :class="{ disabled: helper.disabled }">
                    <input type="checkbox"
                          :value="helper.id"
                          v-model="currentHelpers"
                          @change="saveCustomHelpers"
                          :disabled="helper.disabled">
                    <span class="md-checkbox"></span><span>{{ helper.title }}</span>
                    <span class="md-list_description">{{ helper.description }}</span>
                  </label>
                </template>
              </div>

              <div v-if="!currentHelpers.includes('autoScheme')">
                <h2>Детальная настройка</h2>
                <p class="text-hint">Прежде чем начать подбирать цвета для темы, ознакомьтесь с системой цветов Material Design на их сайте: <a href="//material.io/guidelines/style/color.html#color-color-system">material.io</a>. Не меняйте цвет фонов и текста без необходимости: автоматическая настройка схемы подбирает цвета в соответствии с гайдлайном и всегда подбирает наиболее читабельные цвета.</p>

                <hr class="md-divider">

                <div class="md-container">
                  <h4>Фоны</h4>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_background"
                    :index="'color_background'"
                  ></color-variable>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_background_dialog"
                    :index="'color_background_dialog'"
                  ></color-variable>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_background_secondary"
                    :index="'color_background_secondary'"
                  ></color-variable>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_area_normal"
                    :index="'color_area_normal'"
                  ></color-variable>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_area_hover"
                    :index="'color_area_hover'"
                  ></color-variable>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_area_active"
                    :index="'color_area_active'"
                  ></color-variable>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_button_hover"
                    :index="'color_button_hover'"
                  ></color-variable>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_border"
                    :index="'color_border'"
                  ></color-variable>
                </div>


                <div class="md-container">
                  <h4>Цвет текста</h4>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_text_primary"
                    :index="'color_text_primary'"
                  ></color-variable>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_text_secondary"
                    :index="'color_text_secondary'"
                  ></color-variable>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_text_hint"
                    :index="'color_text_hint'"
                  ></color-variable>
                  <color-variable v-if="variables.scheme"
                    :variable="variables.scheme.color_text_disabled"
                    :index="'color_text_disabled'"
                  ></color-variable>
                </div>
              </div>

              <hr class="md-divider">
            </div>


            <input type="checkbox" id="theme_files" class="field-checkbox" name="files">
            <div class="md-list md-panel">
              <label for="theme_files" class="md-list_title inactive">
                <span class="md-icon" aria-hidden="true" data-icon="build"></span>Файлы темы
              </label>
              <label for="theme_files" class="md-list_control md-icon" data-icon="expand_more"></label>
              <span class="md-list_content">
                <span class="md-list_content-placeholder">Настройка обложки, профиля, шрифтов и прочего.</span>
              </span>
            </div>
            <div class="md-list_hidden theme-files">

              <h2>Список файлов</h2>

              <div class="md-container" v-if="!status.isFileLoading">
                <template v-for="(file, index) in builderData.imports">
                  <label class="v-file md-list md-control">
                    <input type="checkbox" :value="file.url" v-model="user.selected_imports" @change="saveImports">
                    <span class="md-checkbox"></span><span :data-url="file.url">{{ file.title ? file.title : file.url }}</span>
                    <span class="md-list_description">{{ file.desc }}</span>
                  </label>
                </template>
              </div>

            </div>


  <!--           <div class="md-list md-panel" v-if="support.file">
              <label for="user_setting" class="md-list_title inactive">
                <span class="md-icon" aria-hidden="true" data-icon="attach_file"></span>Мои настройки
              </label>
              <span class="md-list_content">
                <span class="md-list_content-placeholder"><input type="file" id="user_setting" name="file" @change="readUserFile" accept=".sass, .scss, .css"></span>
              </span>
            </div> -->
          </form>

          <hr class="md-divider">

          <p>Если у вас возникли вопросы по теме или сборщику, можете <a href="https://shikimori.one/grin3671">написать разработчику</a>.</p>

          <p>Поддержать разработку можно через <span class="strong"><span style="color: #8b3ffd">Ю</span>money</span>: <a href="https://yoomoney.ru/to/41001258665103">41001258665103</a>. </p>
        </div>
      </section>



      <section id="nav_preview" v-show="status.isFileLoading == false">
        <div class="content">
          <h2 class="display1">Предпросмотр</h2>
          <p>Условный вид профиля без адаптации для мобильных телефонов.</p>

          <div id="vue_preview" class="shiki-preview">
            <div class="shiki-preview__body" :class="{ scheme_dark: user.selected_scheme == 'dark' }" :style="{ backgroundColor: color_background, backgroundImage: 'url(' + user.user_background + ')' }">
              <div class="shiki-preview__menu" :style="{ backgroundColor: color_menu_background }"></div>
              <div class="shiki-preview__page" :style="{ backgroundColor: color_background }">
                <div class="shiki-preview__cover" :class="{ cover_display: user.selected_layout == 'cover' }" :style="{ backgroundImage: 'url(' + user.user_cover + ')' }"></div>
                <div class="shiki-preview__profile">
                  <div class="shiki-preview__avatar" :style="{ backgroundImage: 'url(' + user.avatar + ')' }"></div>
                  <div class="shiki-preview__block block-h1"></div>
                </div>
                <div class="shiki-preview__list clearfix">
                  <div class="shiki-preview__block"></div>
                  <div class="shiki-preview__list-anime color-primary" :style="{ backgroundColor: color_primary }"></div>
                  <div class="shiki-preview__block"></div>
                  <div class="shiki-preview__list-manga color-accent" :style="{ backgroundColor: color_accent }"></div>
                </div>
                <div class="clearfix"></div>
                <div class="shiki-preview__button color-primary" :style="{ backgroundColor: color_primary }"></div>
              </div>
            </div>
          </div>

          <div class="md-container">
            <label class="v-file md-list md-control">
              <input type="checkbox" v-model="status.isLivePreview" @change="previewTheme">
              <span class="md-checkbox"></span><span>Интерактивный предпросмотр</span>
              <span class="md-list_description">Использовать цветовую палитру в сборщике.</span>
            </label>
          </div>
        </div>
      </section>



      <section id="nav_code" v-show="status.isCompiled">
        <div class="content">
          <h2 class="display1">Готовый стиль</h2>
          <div class="field">
            <label for="output_css" class="label-radio">Скопируйте этот код в настройки вашего профиля:</label>
            <div class="md-textarea code">
              <textarea id="output_css" rows="15"></textarea>
              <div class="md-divider"></div>
            </div>
            <button id="copy_css" class="md-btn raised primary" @click.prevent="copyTheme"><span>Копировать</span></button>
            <span class="text-hint" v-show="support.copy">Чтобы выделить весь текст нажмите на поле ввода сверху, а затем на [Ctrl]+[A].</span>
          </div>
        </div>
      </section>



      <footer class="copyright">shiki-theme © grin3671</footer>


      <color-picker v-if="colorPicker.state"
        v-model="colorPicker.color"
        @select="selectColorPicker($event)"
        @close="closeColorPicker"
      ></color-picker>

      <div class="md-snackbar">
        <template v-for="(notify, index) in snacksTexts">
          <md-snackbar :label-text="notify.labelText" 
                       :action-button-text="notify.actionText"
                       :index="index"
                       @close="snacksTexts.shift()"
          ></md-snackbar>
        </template>
      </div>
      
    </div>

    <script src="./vendor/vue/vue.min.js"></script>
    <script src="./vendor/tinycolor/tinycolor.min.js"></script>
    <script src="./src/js/common.js?16"></script>
  </body>
</html>
